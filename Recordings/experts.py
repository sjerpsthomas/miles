import json
from compact_json_encoder import CompactJSONEncoder

with open("info.json") as f:
    info = json.load(f)

expert_data = [
    [[1, 0, 1, 0, 0, 0, 0, 1, 0, 0, 1, 1, 0, 0, 0], [[2, 1, 1, 2], [1, 2, 0, 3], [1, 1, 1, 1], [2, 3, 4, 3], [0, 0, 0, 1], [1, 1, 1, 1], [0, 2, 0, 2], [3, 2, 1, 2], [0, 3, 1, 2], [1, 1, 2, 1], [3, 0, 0, 1], [2, 1, 1, 2], [0, 2, 2, 1], [1, 2, 1, 2], [1, 1, 0, 2]], [[0, 2, 2, 1], [1, 1, 0, 2], [1, 2, 2, 2], [1, 3, 3, 3], [0, 2, 1, 1], [1, 3, 2, 2], [
        2, 1, 0, 2], [2, 2, 2, 2], [0, 3, 3, 2], [1, 2, 3, 2], [1, 3, 0, 1], [0, 2, 0, 1], [1, 2, 2, 1], [0, 3, 4, 3], [1, 2, 0, 2]], [[3, 3, 2, 2], [3, 3, 2, 3], [0, 3, 2, 2], [1, 2, 0, 2], [2, 2, 1, 2], [3, 3, 2, 3], [1, 3, 0, 2], [3, 3, 3, 3], [2, 2, 0, 2], [0, 3, 0, 1], [0, 3, 2, 2], [0, 1, 2, 1], [1, 3, 4, 3], [1, 4, 3, 3], [1, 3, 3, 2]]],
    [[1, 0, 1, 1, 1, 0, 1, 1, 0, 0, 1, 1, 0, 1, 0], [[1, 1, 1, 1], [3, 3, 3, 3], [3, 1, 1, 1], [0, 0, 0, 0], [4, 3, 3, 3], [0, 3, 2, 2], [0, 1, 1, 1], [4, 4, 4, 4], [2, 2, 1, 1], [3, 3, 3, 3], [1, 3, 1, 1], [2, 1, 1, 1], [1, 2, 3, 3], [0, 2, 1, 1], [2, 3, 2, 2]], [[3, 3, 3, 3], [1, 3, 1, 2], [1, 4, 2, 3], [3, 3, 3, 3], [1, 3, 1, 1], [1, 3, 1, 3], [
        1, 3, 2, 2], [3, 3, 3, 3], [0, 1, 1, 1], [4, 3, 3, 3], [3, 3, 2, 3], [2, 3, 2, 3], [3, 3, 3, 3], [2, 2, 1, 1], [1, 3, 2, 3]], [[2, 3, 3, 3], [1, 3, 3, 3], [1, 3, 1, 1], [3, 2, 2, 3], [1, 3, 3, 3], [2, 3, 3, 3], [2, 3, 3, 3], [3, 3, 3, 3], [2, 3, 3, 3], [1, 3, 2, 2], [3, 1, 1, 1], [3, 2, 1, 1], [1, 2, 1, 1], [3, 2, 2, 2], [1, 3, 2, 3]]],
    [[0, 1, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 1], [[2, 2, 3, 1], [3, 3, 2, 2], [1, 2, 2, 1], [3, 3, 3, 3], [2, 2, 2, 2], [3, 1, 1, 2], [3, 3, 3, 3], [2, 3, 3, 3], [2, 3, 3, 3], [3, 1, 1, 3], [1, 3, 4, 3], [0, 2, 2, 2], [3, 3, 4, 3], [3, 1, 2, 3], [1, 1, 1, 2]], [[3, 4, 3, 4], [2, 1, 2, 2], [3, 3, 3, 4], [3, 3, 3, 3], [4, 4, 4, 4], [3, 3, 3, 3], [
        2, 2, 2, 2], [1, 2, 3, 2], [0, 2, 3, 1], [3, 4, 4, 4], [2, 3, 4, 3], [2, 4, 4, 3], [2, 2, 2, 2], [4, 3, 4, 4], [3, 3, 4, 4]], [[2, 2, 2, 2], [1, 1, 1, 2], [1, 2, 3, 2], [0, 1, 1, 0], [1, 3, 3, 3], [1, 2, 3, 2], [1, 2, 3, 2], [1, 1, 1, 1], [2, 0, 0, 1], [1, 2, 2, 2], [1, 2, 2, 2], [2, 3, 3, 3], [1, 3, 2, 2], [1, 4, 4, 3], [3, 2, 2, 2]]],
]

form_config = [
    {
        0: [
            ['p3s1p1', 'p3s4p1'],
            ['p4s4p2', 'p4s1p2'],
            ['p5s1p3', 'p5s4p3'],
            ['p1s4p1', 'p1s1p1'],
            ['p2s1p2', 'p2s4p2'],
            ['p3s1p3', 'p3s4p3'],
            ['p4s1p1', 'p4s4p1'],
            ['p5s4p2', 'p5s1p2'],
            ['p1s4p3', 'p1s1p3'],
            ['p2s1p1', 'p2s4p1'],
            ['p3s4p2', 'p3s1p2'],
            ['p4s4p3', 'p4s1p3'],
            ['p5s4p1', 'p5s1p1'],
            ['p1s4p2', 'p1s1p2'],
            ['p2s4p3', 'p2s1p3']
        ],
        1: [
            ['p1s4p1', 'p1s1p1'],
            ['p2s1p2', 'p2s4p2'],
            ['p3s4p3', 'p3s1p3'],
            ['p4s4p1', 'p4s1p1'],
            ['p5s4p2', 'p5s1p2'],
            ['p1s1p3', 'p1s4p3'],
            ['p2s4p1', 'p2s1p1'],
            ['p3s1p2', 'p3s4p2'],
            ['p4s1p3', 'p4s4p3'],
            ['p5s1p1', 'p5s4p1'],
            ['p1s4p2', 'p1s1p2'],
            ['p2s1p3', 'p2s4p3'],
            ['p3s1p1', 'p3s4p1'],
            ['p4s4p2', 'p4s1p2'],
            ['p5s4p3', 'p5s1p3']
        ],
        2: [
            ['p5s1p1', 'p5s4p1'],
            ['p1s4p2', 'p1s1p2'],
            ['p2s4p3', 'p2s1p3'],
            ['p3s1p1', 'p3s4p1'],
            ['p4s1p2', 'p4s4p2'],
            ['p5s4p3', 'p5s1p3'],
            ['p1s1p1', 'p1s4p1'],
            ['p2s1p2', 'p2s4p2'],
            ['p3s4p3', 'p3s1p3'],
            ['p4s4p1', 'p4s1p1'],
            ['p5s4p2', 'p5s1p2'],
            ['p1s4p3', 'p1s1p3'],
            ['p2s4p1', 'p2s1p1'],
            ['p3s4p2', 'p3s1p2'],
            ['p4s1p3', 'p4s4p3']
        ]
    },

    {
        0: [
            'p5s3p1',
            'p5s1p1',
            'p5s2p1',
            'p1s2p2',
            'p1s3p2',
            'p1s1p2',
            'p2s3p3',
            'p2s1p3',
            'p2s2p3',
            'p3s1p1',
            'p3s2p1',
            'p3s3p1',
            'p4s2p2',
            'p4s3p2',
            'p4s1p2'
        ],
        1: [
            'p3s1p1',
            'p3s2p1',
            'p3s3p1',
            'p4s2p2',
            'p4s3p2',
            'p4s1p2',
            'p5s3p3',
            'p5s1p3',
            'p5s2p3',
            'p1s2p1',
            'p1s3p1',
            'p1s1p1',
            'p2s3p2',
            'p2s1p2',
            'p2s2p2'
        ],
        2: [
            'p1s2p1',
            'p1s3p1',
            'p1s1p1',
            'p2s3p2',
            'p2s1p2',
            'p2s2p2',
            'p3s1p3',
            'p3s2p3',
            'p3s3p3',
            'p4s2p1',
            'p4s3p1',
            'p4s1p1',
            'p5s3p2',
            'p5s1p2',
            'p5s2p2'
        ]
    },

    {
        0: [
            'p5s3p3',
            'p5s1p3',
            'p5s2p3',
            'p1s2p1',
            'p1s3p1',
            'p1s1p1',
            'p2s3p2',
            'p2s1p2',
            'p2s2p2',
            'p3s1p3',
            'p3s2p3',
            'p3s3p3',
            'p4s2p1',
            'p4s3p1',
            'p4s1p1'
        ],
        1: [
            'p3s1p3',
            'p3s2p3',
            'p3s3p3',
            'p4s2p1',
            'p4s3p1',
            'p4s1p1',
            'p5s3p2',
            'p5s1p2',
            'p5s2p2',
            'p1s2p3',
            'p1s3p3',
            'p1s1p3',
            'p2s3p1',
            'p2s1p1',
            'p2s2p1'
        ],
        2: [
            'p1s2p3',
            'p1s3p3',
            'p1s1p3',
            'p2s3p1',
            'p2s1p1',
            'p2s2p1',
            'p3s1p2',
            'p3s2p2',
            'p3s3p2',
            'p4s2p3',
            'p4s3p3',
            'p4s1p3',
            'p5s3p1',
            'p5s1p1',
            'p5s2p1'
        ]
    },

    {
        0: [
            'p5s3p2',
            'p5s1p2',
            'p5s2p2',
            'p1s2p3',
            'p1s3p3',
            'p1s1p3',
            'p2s3p1',
            'p2s1p1',
            'p2s2p1',
            'p3s1p2',
            'p3s2p2',
            'p3s3p2',
            'p4s2p3',
            'p4s3p3',
            'p4s1p3'
        ],
        1: [
            'p3s1p2',
            'p3s2p2',
            'p3s3p2',
            'p4s2p3',
            'p4s3p3',
            'p4s1p3',
            'p5s3p1',
            'p5s1p1',
            'p5s2p1',
            'p1s2p2',
            'p1s3p2',
            'p1s1p2',
            'p2s3p3',
            'p2s1p3',
            'p2s2p3'
        ],
        2: [
            'p1s2p2',
            'p1s3p2',
            'p1s1p2',
            'p2s3p3',
            'p2s1p3',
            'p2s2p3',
            'p3s1p1',
            'p3s2p1',
            'p3s3p1',
            'p4s2p2',
            'p4s3p2',
            'p4s1p2',
            'p5s3p3',
            'p5s1p3',
            'p5s2p3'
        ]
    }
]


for i, config in enumerate(form_config):
    if i == 0: continue

    for expert_id in range(3):
        pids = config[expert_id]
        ratings = expert_data[expert_id][i]

        pid: str
        rating: list[int]
        for pid, rating in zip(pids, ratings):
            print(pid, rating)

            # Fix IDs
            pupil = int(pid[1]) - 1
            session = int(pid[3]) - 1
            performance = int(pid[5]) - 1

            new_pid = f"ex1_par{pupil}_ses{session}_per{performance}"

            info[new_pid]["scores"][expert_id] = rating



with open("info.json", "w") as f:
    json.dump(info, f, indent=4, cls=CompactJSONEncoder)